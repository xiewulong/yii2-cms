{"version":3,"sources":["backend.user.js","backend.form.js"],"names":["$","window","document","undefined","on","$this","parents","removeClass","end","ajax","url","attr","data","csrf","method","success","d","error","console","message","location","reload","jQuery","e","$modal","modal","text","target","$fieldset","find","prop","User","password_old","value","password","password_repeat","focus","dataType","alert","Radio","$target","unsupportList","defaultValue","staticSelect","parentItems","parentItemsValue","$formGroups","$static","val","init","events","switch","_this","unsupports","itemValue","itemName","html","show","length","filter","join","hide","fn","radioFormSwitch","formSwitch","type","$doc","Selection","button","$button","$formGroup","$label","$hidden","$name","_value","getData","next","parent","toggleClass","hasClass","name","setValue","clearAll","close","setData","_render","list","loaded","items","item","i","len","hasSub","children","push","id","prevAll"],"mappings":";;;;;;;;;;;;AAAA;;;;;;;AAOA;AACA,CAAA,UAAAA,CAAA,EAAAC,MAAA,EAAAC,QAAA,EAAAC,SAAA,EAAA;;AAEAH,GAAAE,QAAA,EAAAE,EAAA,CAAA,OAAA,EAAA,2BAAA,EAAA,YAAA;AACA,MAAAC,QAAAL,EAAA,IAAA,EAAAM,OAAA,CAAA,gBAAA,EAAAC,WAAA,CAAA,eAAA,EAAAC,GAAA,EAAA;;AAEAR,IAAAS,IAAA,CAAA;AACAC,QAAAL,MAAAM,IAAA,CAAA,MAAA,CADA;AAEAC,SAAAZ,EAAAa,IAAA,EAFA;AAGAC,WAAA,MAHA;AAIAC,YAAA,iBAAAC,CAAA,EAAA;AACA,QAAAA,EAAAC,KAAA,EAAA;AACAC,aAAAD,KAAA,CAAAD,EAAAG,OAAA;;AAEA,YAAA,KAAA;AACA;AACAlB,WAAAmB,QAAA,CAAAC,MAAA;AACA;AAXA,GAAA;;AAcA,SAAA,KAAA;AACA,EAlBA;AAoBA,CAtBA,EAsBAC,MAtBA,EAsBArB,MAtBA,EAsBAC,QAtBA;;AAwBA;AACA,CAAA,UAAAF,CAAA,EAAAC,MAAA,EAAAC,QAAA,EAAAC,SAAA,EAAA;;AAEAH,GAAAE,QAAA,EAAAE,EAAA,CAAA,OAAA,EAAA,8BAAA,EAAA,UAAAmB,CAAA,EAAA;AACA,MAAAlB,QAAAL,EAAA,IAAA,EAAAM,OAAA,CAAA,gBAAA,EAAAC,WAAA,CAAA,eAAA,EAAAC,GAAA,EAAA;AAAA,MACAgB,SAAAxB,EAAAyB,KAAA,CAAA,6BACA,4BADA,GAEA,8CAFA,GAGA,YAHA,GAIA,4BAJA,GAKA,8HALA,GAMA,0BANA,GAMApB,MAAAqB,IAAA,EANA,GAMA,OANA,GAOA,QAPA,GAQA,0BARA,GASA,0BATA,GAUA,sEAVA,GAWA,wIAXA,GAYA,QAZA,GAaA,0BAbA,GAcA,kEAdA,GAeA,0GAfA,GAgBA,QAhBA,GAiBA,0BAjBA,GAkBA,2EAlBA,GAmBA,wHAnBA,GAoBA,QApBA,GAqBA,QArBA,GAsBA,4BAtBA,GAuBA,gFAvBA,GAwBA,2DAxBA,GAyBA,QAzBA,GA0BA,aA1BA,GA2BA,SA3BA,GA4BA,QA5BA,GA6BA,QA7BA,CADA;;AAgCAF,SAAApB,EAAA,CAAA,QAAA,EAAA,MAAA,EAAA,YAAA;AACA,OAAAuB,eAAA;AAAA,OAAAV,cAAA;AAAA,OACAW,YAAA5B,EAAA,IAAA,EAAA6B,IAAA,CAAA,UAAA,EAAAC,IAAA,CAAA,UAAA,EAAA,IAAA,CADA;AAAA,OAEAC,OAAA;AACAC,kBAAA,KAAAA,YAAA,CAAAC,KADA;AAEAC,cAAA,KAAAA,QAAA,CAAAD,KAFA;AAGAE,qBAAA,KAAAA,eAAA,CAAAF;AAHA,IAFA;;AAQA,OAAAF,KAAAC,YAAA,IAAA,EAAA,EAAA;AACAL,aAAA,KAAAK,YAAA;AACAf,YAAA,QAAA;AACA,IAHA,MAGA,IAAAc,KAAAG,QAAA,IAAA,EAAA,EAAA;AACAP,aAAA,KAAAO,QAAA;AACA,SAAAA,QAAA,CAAAE,KAAA;AACAnB,YAAA,QAAA;AACA,IAJA,MAIA,IAAAc,KAAAI,eAAA,IAAA,EAAA,EAAA;AACAR,aAAA,KAAAQ,eAAA;AACAlB,YAAA,QAAA;AACA,IAHA,MAGA,IAAAc,KAAAG,QAAA,IAAAH,KAAAI,eAAA,EAAA;AACAR,aAAA,KAAAQ,eAAA;AACAlB,YAAA,aAAA;AACA;AACA,OAAAA,KAAA,EAAA;AACAW,cAAAE,IAAA,CAAA,UAAA,EAAA,KAAA;AACAH,WAAAS,KAAA;AACA,WAAA,KAAA;AACA;;AAEApC,KAAAS,IAAA,CAAA;AACAC,SAAAL,MAAAM,IAAA,CAAA,MAAA,CADA;AAEAC,UAAAZ,EAAAa,IAAA,CAAA,EAAAkB,MAAAA,IAAA,EAAA,CAFA;AAGAjB,YAAA,MAHA;AAIAuB,cAAA,MAJA;AAKAtB,aAAA,iBAAAC,CAAA,EAAA;AACAA,OAAAC,KAAA,GAAAW,UAAAE,IAAA,CAAA,UAAA,EAAA,KAAA,CAAA,GAAAN,OAAAC,KAAA,CAAA,MAAA,CAAA;AACAzB,OAAAsC,KAAA,CAAAtB,EAAAG,OAAA,EAAAH,EAAAC,KAAA;AACA;AARA,IAAA;;AAWA,UAAA,KAAA;AACA,GAzCA;;AA2CA,SAAA,KAAA;AACA,EA7EA;AA+EA,CAjFA,EAiFAK,MAjFA,EAiFArB,MAjFA,EAiFAC,QAjFA;;ACjCA;;;;;;;AAOA;AACA,CAAA,UAAAF,CAAA,EAAAG,SAAA,EAAA;AAAA,KAEAoC,KAFA;AAIA,iBAAAC,OAAA,EAAAC,aAAA,EAAAC,YAAA,EAAAC,YAAA,EAAAC,WAAA,EAAAC,gBAAA,EAAA;AAAA;;AACA,QAAAL,OAAA,GAAAA,OAAA;AACA,QAAAC,aAAA,GAAAA,aAAA;AACA,QAAAR,KAAA,GAAAS,YAAA;AACA,QAAAE,WAAA,GAAAA,WAAA;AACA,QAAAC,gBAAA,GAAAA,gBAAA;AACA,QAAAC,WAAA,GAAA9C,EAAA,aAAA,CAAA;AACA,OAAA2C,YAAA,EAAA;AACA,SAAAI,OAAA,GAAA/C,EAAA2C,YAAA,CAAA;AACA,SAAAV,KAAA,GAAA,KAAAA,KAAA,IAAA,EAAA,GAAA,KAAAO,OAAA,CAAAQ,GAAA,EAAA,GAAA,KAAAf,KAAA;AACA;;AAEA,UAAA,KAAAgB,IAAA,EAAA;AACA;;AAjBA;AAAA;AAAA,0BAmBA;AACA,SAAAC,MAAA;AACA,SAAAC,MAAA;;AAEA,WAAA,KAAAX,OAAA;AACA;AAxBA;AAAA;AAAA,4BA0BA;AACA,QAAAY,QAAA,IAAA;AACA,SAAAZ,OAAA,CAAApC,EAAA,CAAA,QAAA,EAAA,YAAA;AACAgD,WAAAnB,KAAA,GAAA,KAAAA,KAAA;AACAmB,WAAAD,MAAA;AACA,KAHA;AAIA;AAhCA;AAAA;AAAA,6BAkCA;AACA,QAAAE,mBAAA;AAAA,QAAAC,kBAAA;AAAA,QAAAC,iBAAA;AACA,QAAA,KAAAR,OAAA,EAAA;AACAO,iBAAA,KAAAV,WAAA,CAAA,KAAAX,KAAA,CAAA;AACA,UAAAc,OAAA,CAAAS,IAAA,CAAA,KAAAX,gBAAA,CAAAS,SAAA,KAAA,EAAA;AACA,UAAArB,KAAA,GAAAqB,SAAA;AACA;AACAD,iBAAA,KAAAZ,aAAA,CAAA,KAAAR,KAAA,KAAA,EAAA;AACA,SAAAa,WAAA,CAAAW,IAAA;AACA,QAAA,CAAAJ,WAAAK,MAAA,EAAA;AACA,SAAAZ,WAAA,CAAAa,MAAA,CAAA,MAAAN,WAAAO,IAAA,CAAA,KAAA,CAAA,EAAAC,IAAA;AACA;AA7CA;;AAAA;AAAA;;AAiDA7D,GAAA8D,EAAA,CAAAC,eAAA,GAAA,UAAAtB,aAAA,EAAAC,YAAA,EAAAC,YAAA,EAAAC,WAAA,EAAAC,gBAAA,EAAA;AACA,SAAA,IAAAN,KAAA,CAAA,IAAA,EAAAE,aAAA,EAAAC,YAAA,EAAAC,YAAA,EAAAC,WAAA,EAAAC,gBAAA,CAAA;AACA,EAFA;;AAIA7C,GAAA8D,EAAA,CAAAE,UAAA,GAAA,UAAAvB,aAAA,EAAAC,YAAA,EAAAC,YAAA,EAAAC,WAAA,EAAAC,gBAAA,EAAA;AACA,MAAAoB,OAAA,KAAAtD,IAAA,CAAA,kBAAA,CAAA;;AAEA,MAAA,KAAAsD,OAAA,YAAA,CAAA,EAAA;AACA,UAAA,KAAAA,OAAA,YAAA,EAAAxB,aAAA,EAAAC,YAAA,EAAAC,YAAA,EAAAC,WAAA,EAAAC,gBAAA,CAAA;AACA;;AAEA,SAAA,IAAA;AACA,EARA;AAUA,CA/DA,EA+DAvB,MA/DA;;AAiEA;AACA,CAAA,UAAAtB,CAAA,EAAAE,QAAA,EAAAC,SAAA,EAAA;AACA,KAAA+D,OAAAlE,EAAAE,QAAA,CAAA;;AADA,KAGAiE,SAHA;AAKA,qBAAAC,MAAA,EAAA;AAAA;;AACA,QAAAC,OAAA,GAAArE,EAAAoE,MAAA,CAAA;AACA,QAAAE,UAAA,GAAA,KAAAD,OAAA,CAAA/D,OAAA,CAAA,aAAA,CAAA;AACA,QAAAiE,MAAA,GAAA,KAAAD,UAAA,CAAAzC,IAAA,CAAA,OAAA,CAAA;AACA,QAAA2C,OAAA,GAAA,KAAAF,UAAA,CAAAzC,IAAA,CAAA,oBAAA,CAAA;AACA,QAAA4C,KAAA,GAAA,KAAAH,UAAA,CAAAzC,IAAA,CAAA,MAAA,CAAA;AACA,QAAAnB,GAAA,GAAA,KAAA2D,OAAA,CAAA1D,IAAA,CAAA,qBAAA,CAAA;AACA,QAAA+D,MAAA,GAAA,KAAAF,OAAA,CAAAxB,GAAA,EAAA;;AAEA,UAAA,KAAAC,IAAA,EAAA;AACA;;AAfA;AAAA;AAAA,0BAiBA;AACA,SAAA0B,OAAA;AACA,SAAAlD,KAAA;AACA,SAAAyB,MAAA;;AAEA;AACA;AAvBA;AAAA;AAAA,4BAyBA;AACA,QAAAE,QAAA,IAAA;AACA,SAAA5B,MAAA,CAAApB,EAAA,CAAA,OAAA,EAAA,SAAA,EAAA,YAAA;AACA,SAAAC,QAAAL,EAAA,IAAA,CAAA;AACA,SAAAK,MAAAuE,IAAA,CAAA,IAAA,EAAAlB,MAAA,EAAA;AACArD,YAAAwE,MAAA,CAAA,IAAA,EAAAC,WAAA,CAAA,QAAA;AACA,aAAA,KAAA;AACA;AACA,SAAAzE,MAAA0E,QAAA,CAAA,QAAA,CAAA,EAAA;AACA,aAAA,KAAA;AACA;AACA3B,WAAAnB,KAAA,GAAA5B,MAAAM,IAAA,CAAA,SAAA,CAAA;AACAyC,WAAA4B,IAAA,GAAA3E,MAAAM,IAAA,CAAA,WAAA,CAAA;AACAyC,WAAA6B,QAAA;AACA,YAAA,KAAA;AACA,KAbA;AAcA,SAAAR,KAAA,CAAArE,EAAA,CAAA,OAAA,EAAA,GAAA,EAAA,YAAA;AACAgD,WAAA8B,QAAA;AACA,KAFA;AAGA;AA5CA;AAAA;AAAA,8BA8CA;AACA,SAAAV,OAAA,CAAAxB,GAAA,CAAA,KAAAf,KAAA;AACA,SAAAwC,KAAA,CAAAjB,IAAA,CAAA,CAAA,KAAAa,OAAA,CAAA1D,IAAA,CAAA,0BAAA,IAAA,uEAAA,GAAA,EAAA,IAAA,KAAAqE,IAAA;AACA,SAAAG,KAAA;AACA;AAlDA;AAAA;AAAA,2BAoDA;AACA,SAAA3D,MAAA,CAAAC,KAAA,CAAA,MAAA;AACA;AAtDA;AAAA;AAAA,2BAwDA;AACA,QAAA+B,OAAA,6BACA,4BADA,GAEA,6BAFA,GAGA,4BAHA,GAIA,8HAJA,GAKA,0BALA,GAKA,KAAAe,MAAA,CAAA7C,IAAA,EALA,GAKA,OALA,GAMA,QANA,GAOA,8DAPA,GAQA,QARA,GASA,QATA,GAUA,QAVA;AAWA,SAAAF,MAAA,GAAAxB,EAAAyB,KAAA,CAAA+B,IAAA,CAAA;AACA,SAAA4B,OAAA;AACA;AAtEA;AAAA;AAAA,6BAwEA;AAAA;;AACA,QAAAC,iBAAA;AAAA,QAAAC,aAAA;AAAA,QACAlC,QAAA,IADA;AAEA,QAAA,KAAAmC,MAAA,IAAA,CAAA,KAAA3E,IAAA,EAAA;AACA,SAAA2E,MAAA,GAAA,IAAA;AACAD,WAAA,CAAAD,WAAA,iBAAAG,KAAA,EAAA;AACA,SAAAC,aAAA;AAAA,SACAC,IAAA,CADA;AAAA,SAEAC,MAAAH,MAAA9B,MAFA;AAAA,SAGAF,OAAA,CAAA,MAAA,CAHA;AAIA,YAAAkC,IAAAC,GAAA,EAAAD,GAAA,EAAA;AACA,UAAAE,eAAA;AACAH,aAAAD,MAAAE,CAAA,CAAA;AACAE,eAAAH,KAAAI,QAAA,IAAAJ,KAAAD,KAAA;AACAhC,WAAAsC,IAAA,CAAA,YAAA,CAAAF,MAAA,IAAA,OAAAlB,MAAA,IAAAe,KAAAM,EAAA,IAAA,OAAArB,MAAA,GAAA,iBAAA,GAAA,EAAA,IAAA,YAAA,GAAAe,KAAAM,EAAA,GAAA,eAAA,GAAAN,KAAAT,IAAA,GAAA,IAAA,IAAAY,SAAA,qDAAA,GAAA,EAAA,IAAAH,KAAAT,IAAA,GAAA,MAAA;AACAS,WAAAI,QAAA,IAAArC,KAAAsC,IAAA,CAAAT,SAAAI,KAAAI,QAAA,CAAA,CAAA;AACAJ,WAAAD,KAAA,IAAAhC,KAAAsC,IAAA,CAAAT,SAAAI,KAAAD,KAAA,CAAA,CAAA;AACAhC,WAAAsC,IAAA,CAAA,OAAA;AACA;AACAtC,UAAAsC,IAAA,CAAA,OAAA;AACA,YAAAtC,KAAAI,IAAA,CAAA,EAAA,CAAA;AACA,KAhBA,EAgBA,KAAAhD,IAhBA,CAAA;AAiBA,SAAAY,MAAA,CAAAK,IAAA,CAAA,gBAAA,EAAAtB,WAAA,CAAA,eAAA,EAAAiD,IAAA,CAAA8B,IAAA;AACA;AA/FA;AAAA;AAAA,6BAiGA;AAAA;;AACAtF,MAAAS,IAAA,CAAA;AACAC,UAAA,KAAAA,GADA;AAEAE,WAAA,EAFA;AAGAE,aAAA,KAHA;AAIAuB,eAAA,MAJA;AAKAtB,cAAA,iBAAAC,CAAA,EAAA;AACA,UAAAA,EAAAC,KAAA,EAAA;AACAjB,SAAAsC,KAAA,CAAAtB,EAAAG,OAAA;AACA;AACA,aAAAP,IAAA,GAAAI,EAAAJ,IAAA;AACA,aAAAwE,OAAA;AACA;AAXA,KAAA;AAaA;AA/GA;;AAAA;AAAA;;AAmHAlB,MAAA9D,EAAA,CAAA,OAAA,EAAA,uBAAA,EAAA,YAAA;AACA,MAAA+D,SAAA,CAAA,IAAA;AACA,EAFA,EAEA/D,EAFA,CAEA,OAFA,EAEA,4BAFA,EAEA,YAAA;AACA,MAAAC,QAAAL,EAAA,IAAA,CAAA;AACAK,QAAAwE,MAAA,CAAA,iBAAA,EAAArB,IAAA,CAAA,EAAA,EAAAwC,OAAA,CAAA,oBAAA,EAAAhD,GAAA,CAAA,EAAA;AACA,EALA;AAMA,CAzHA,EAyHA1B,MAzHA,EAyHApB,QAzHA","file":"backend.js","sourcesContent":["/*!\n * backend.user\n * xiewulong <xiewulong@vip.qq.com>\n * create: 2016/8/8\n * since: 0.0.1\n */\n\n// logout\n(($, window, document, undefined) => {\n\n\t$(document).on('click', '[data-user=logout] a.text', function() {\n\t\tlet $this = $(this).parents('.dropdown-open').removeClass('dropdown-open').end();\n\n\t\t$.ajax({\n\t\t\turl: $this.attr('href'),\n\t\t\tdata: $.csrf(),\n\t\t\tmethod: 'post',\n\t\t\tsuccess: (d) => {\n\t\t\t\tif(d.error) {\n\t\t\t\t\tconsole.error(d.message);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t});\n\n\t\treturn false;\n\t});\n\n})(jQuery, window, document);\n\n// password reset\n(($, window, document, undefined) => {\n\n\t$(document).on('click', '[data-password=reset] a.text', function(e) {\n\t\tlet $this\t= $(this).parents('.dropdown-open').removeClass('dropdown-open').end(),\n\t\t\t$modal\t= $.modal(\t'<div class=\"modal fade\">' +\n\t\t\t\t\t\t\t\t\t'<div class=\"modal-dialog\">' +\n\t\t\t\t\t\t\t\t\t\t'<form class=\"modal-content form-horizontal\">' +\n\t\t\t\t\t\t\t\t\t\t\t'<fieldset>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"modal-header\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<h5 class=\"modal-title\">' + $this.text() + '</h5>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"modal-body\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"form-group\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<label class=\"col-sm-3 control-label\" for=\"password-old\">原密码</label>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"col-sm-6\"><input type=\"password\" name=\"password_old\" id=\"password-old\" class=\"form-control\" autofocus=\"autofocus\" /></div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"form-group\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<label class=\"col-sm-3 control-label\" for=\"password\">新密码</label>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"col-sm-6\"><input type=\"password\" name=\"password\" id=\"password\" class=\"form-control\" /></div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"form-group\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<label class=\"col-sm-3 control-label\" for=\"password-repeat\">确认新密码</label>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"col-sm-6\"><input type=\"password\" name=\"password_repeat\" id=\"password-repeat\" class=\"form-control\" /></div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"modal-footer\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">取消</button>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<button type=\"submit\" class=\"btn btn-primary\">确定</button>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t'</fieldset>' +\n\t\t\t\t\t\t\t\t\t\t'</form>' +\n\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t'</div>');\n\n\t\t$modal.on('submit', 'form', function() {\n\t\t\tlet target, error,\n\t\t\t\t$fieldset\t= $(this).find('fieldset').prop('disabled', true),\n\t\t\t\tUser\t\t= {\n\t\t\t\t\tpassword_old: this.password_old.value,\n\t\t\t\t\tpassword: this.password.value,\n\t\t\t\t\tpassword_repeat: this.password_repeat.value,\n\t\t\t\t};\n\n\t\t\tif(User.password_old == '') {\n\t\t\t\ttarget = this.password_old;\n\t\t\t\terror = '请输入原密码';\n\t\t\t} else if(User.password == '') {\n\t\t\t\ttarget = this.password;\n\t\t\t\tthis.password.focus();\n\t\t\t\terror = '请输入新密码';\n\t\t\t} else if(User.password_repeat == '') {\n\t\t\t\ttarget = this.password_repeat;\n\t\t\t\terror = '请确认新密码';\n\t\t\t} else if(User.password != User.password_repeat) {\n\t\t\t\ttarget = this.password_repeat;\n\t\t\t\terror = '两次输入的新密码不一致';\n\t\t\t}\n\t\t\tif(error) {\n\t\t\t\t$fieldset.prop('disabled', false);\n\t\t\t\ttarget.focus();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: $this.attr('href'),\n\t\t\t\tdata: $.csrf({User: User}),\n\t\t\t\tmethod: 'post',\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: (d) => {\n\t\t\t\t\td.error ? $fieldset.prop('disabled', false) : $modal.modal('hide');\n\t\t\t\t\t$.alert(d.message, d.error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn false;\n\t\t});\n\n\t\treturn false;\n\t});\n\n})(jQuery, window, document);\n","/*!\n * backend.form\n * xiewulong <xiewulong@vip.qq.com>\n * create: 2016/8/8\n * since: 0.0.1\n */\n\n// switch\n(($, undefined) => {\n\n\tclass Radio {\n\n\t\tconstructor($target, unsupportList, defaultValue, staticSelect, parentItems, parentItemsValue) {\n\t\t\tthis.$target = $target;\n\t\t\tthis.unsupportList = unsupportList;\n\t\t\tthis.value = defaultValue;\n\t\t\tthis.parentItems = parentItems;\n\t\t\tthis.parentItemsValue = parentItemsValue;\n\t\t\tthis.$formGroups = $('.form-group');\n\t\t\tif(staticSelect) {\n\t\t\t\tthis.$static = $(staticSelect);\n\t\t\t\tthis.value = this.value == '' ? this.$target.val() : this.value;\n\t\t\t}\n\n\t\t\treturn this.init();\n\t\t}\n\n\t\tinit() {\n\t\t\tthis.events();\n\t\t\tthis.switch();\n\n\t\t\treturn this.$target;\n\t\t}\n\n\t\tevents() {\n\t\t\tlet _this = this;\n\t\t\tthis.$target.on('change', function() {\n\t\t\t\t_this.value = this.value;\n\t\t\t\t_this.switch();\n\t\t\t});\n\t\t}\n\n\t\tswitch() {\n\t\t\tlet unsupports, itemValue, itemName;\n\t\t\tif(this.$static) {\n\t\t\t\titemValue = this.parentItems[this.value];\n\t\t\t\tthis.$static.html(this.parentItemsValue[itemValue] || '');\n\t\t\t\tthis.value = itemValue;\n\t\t\t}\n\t\t\tunsupports\t= this.unsupportList[this.value] || [];\n\t\t\tthis.$formGroups.show();\n\t\t\tif(!unsupports.length) return;\n\t\t\tthis.$formGroups.filter('.' + unsupports.join(', .')).hide();\n\t\t}\n\n\t}\n\n\t$.fn.radioFormSwitch = function(unsupportList, defaultValue, staticSelect, parentItems, parentItemsValue) {\n\t\treturn new Radio(this, unsupportList, defaultValue, staticSelect, parentItems, parentItemsValue);\n\t};\n\n\t$.fn.formSwitch = function(unsupportList, defaultValue, staticSelect, parentItems, parentItemsValue) {\n\t\tlet type = this.attr('data-form-switch');\n\n\t\tif(this[type + 'FormSwitch']) {\n\t\t\treturn this[type + 'FormSwitch'](unsupportList, defaultValue, staticSelect, parentItems, parentItemsValue);\n\t\t}\n\n\t\treturn this;\n\t};\n\n})(jQuery);\n\n// data selection\n(($, document, undefined) => {\n\tlet $doc\t\t= $(document);\n\n\tclass Selection {\n\n\t\tconstructor(button) {\n\t\t\tthis.$button\t= $(button);\n\t\t\tthis.$formGroup\t= this.$button.parents('.form-group');\n\t\t\tthis.$label\t\t= this.$formGroup.find('label');\n\t\t\tthis.$hidden\t= this.$formGroup.find('input[type=hidden]');\n\t\t\tthis.$name\t\t= this.$formGroup.find('span');\n\t\t\tthis.url\t\t= this.$button.attr('data-form-selection');\n\t\t\tthis._value\t\t= this.$hidden.val();\n\n\t\t\treturn this.init();\n\t\t}\n\n\t\tinit() {\n\t\t\tthis.getData();\n\t\t\tthis.modal();\n\t\t\tthis.events();\n\n\t\t\treturn;\n\t\t}\n\n\t\tevents() {\n\t\t\tlet _this\t= this;\n\t\t\tthis.$modal.on('click', 'ul li p', function() {\n\t\t\t\tlet $this\t= $(this);\n\t\t\t\tif($this.next('ul').length) {\n\t\t\t\t\t$this.parent('li').toggleClass('unfold');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif($this.hasClass('active')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t_this.value = $this.attr('data-id');\n\t\t\t\t_this.name = $this.attr('data-name');\n\t\t\t\t_this.setValue();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tthis.$name.on('click', 'i', function() {\n\t\t\t\t_this.clearAll();\n\t\t\t});\n\t\t}\n\n\t\tsetValue() {\n\t\t\tthis.$hidden.val(this.value);\n\t\t\tthis.$name.html((this.$button.attr('data-form-selected-clear') ? '<i class=\"glyphicon glyphicon-remove\" data-form-selected=\"clear\"></i>' : '') + this.name);\n\t\t\tthis.close();\n\t\t}\n\n\t\tclose() {\n\t\t\tthis.$modal.modal('hide');\n\t\t}\n\n\t\tmodal() {\n\t\t\tlet html =\t'<div class=\"modal fade\">' +\n\t\t\t\t\t\t\t'<div class=\"modal-dialog\">' +\n\t\t\t\t\t\t\t\t'<div class=\"modal-content\">' +\n\t\t\t\t\t\t\t\t\t'<div class=\"modal-header\">' +\n\t\t\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' +\n\t\t\t\t\t\t\t\t\t\t'<h5 class=\"modal-title\">' + this.$label.text() + '</h5>' +\n\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t'<div class=\"modal-body admin-selection admin-loading\"></div>' +\n\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t'</div>';\n\t\t\tthis.$modal = $.modal(html);\n\t\t\tthis.setData();\n\t\t}\n\n\t\tsetData() {\n\t\t\tlet _render, list,\n\t\t\t\t_this\t= this;\n\t\t\tif(this.loaded || !this.data) return;\n\t\t\tthis.loaded = true;\n\t\t\tlist = (_render = (items) => {\n\t\t\t\tlet item,\n\t\t\t\t\ti\t\t= 0,\n\t\t\t\t\tlen\t\t= items.length,\n\t\t\t\t\thtml\t= ['<ul>'];\n\t\t\t\tfor(; i < len; i++) {\n\t\t\t\t\tlet hasSub;\n\t\t\t\t\titem = items[i];\n\t\t\t\t\thasSub = item.children || item.items;\n\t\t\t\t\thtml.push('<li><p' + (!hasSub && this._value && item.id == this._value ? ' class=\"active\"' : '') + ' data-id=\"' + item.id + '\" data-name=\"' + item.name + '\">' + (hasSub ? '<i class=\"glyphicon glyphicon-triangle-bottom\"></i>' : '') + item.name + '</p>');\n\t\t\t\t\titem.children && html.push(_render(item.children));\n\t\t\t\t\titem.items && html.push(_render(item.items));\n\t\t\t\t\thtml.push('</li>');\n\t\t\t\t}\n\t\t\t\thtml.push('</ul>');\n\t\t\t\treturn html.join('');\n\t\t\t})(this.data);\n\t\t\tthis.$modal.find('.admin-loading').removeClass('admin-loading').html(list);\n\t\t}\n\n\t\tgetData() {\n\t\t\t$.ajax({\n\t\t\t\turl: this.url,\n\t\t\t\tdata: {},\n\t\t\t\tmethod: 'get',\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: (d) => {\n\t\t\t\t\tif(d.error) {\n\t\t\t\t\t\t$.alert(d.message);\n\t\t\t\t\t}\n\t\t\t\t\tthis.data = d.data;\n\t\t\t\t\tthis.setData();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t}\n\n\t$doc.on('click', '[data-form-selection]', function() {\n\t\tnew Selection(this);\n\t}).on('click', '[data-form-selected=clear]', function() {\n\t\tlet $this\t= $(this);\n\t\t$this.parent('.selection-name').html('').prevAll('input[type=hidden]').val('');\n\t});\n})(jQuery, document);\n"],"sourceRoot":"/source/"}