{"version":3,"sources":["user.js","form.js"],"names":["$","window","document","undefined","on","$this","parents","removeClass","end","ajax","url","attr","data","csrf","method","success","d","error","console","message","location","reload","jQuery","e","$modal","modal","text","target","$fieldset","find","prop","User","password_old","value","password","password_repeat","focus","dataType","alert","Radio","$target","unsupportList","defaultValue","staticSelect","parentItems","parentItemsValue","$formGroups","$static","val","init","events","switch","_this","unsupports","itemValue","itemName","html","show","length","filter","join","hide","fn","radioFormSwitch","formSwitch","type","$doc","Selection","button","$button","$formGroup","$label","$hidden","$name","_value","getData","next","parent","toggleClass","hasClass","name","setValue","clearAll","close","setData","_render","list","loaded","items","item","i","len","hasSub","children","push","id","prevAll"],"mappings":"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","file":"backend.js","sourcesContent":["/*!\n * user\n * xiewulong <xiewulong@vip.qq.com>\n * create: 2016/8/8\n * since: 0.0.1\n */\n\n// logout\n(($, window, document, undefined) => {\n\n\t$(document).on('click', '[data-user=logout] a.text', function() {\n\t\tlet $this = $(this).parents('.dropdown-open').removeClass('dropdown-open').end();\n\n\t\t$.ajax({\n\t\t\turl: $this.attr('href'),\n\t\t\tdata: $.csrf(),\n\t\t\tmethod: 'post',\n\t\t\tsuccess: (d) => {\n\t\t\t\tif(d.error) {\n\t\t\t\t\tconsole.error(d.message);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t});\n\n\t\treturn false;\n\t});\n\n})(jQuery, window, document);\n\n// password reset\n(($, window, document, undefined) => {\n\n\t$(document).on('click', '[data-password=reset] a.text', function(e) {\n\t\tlet $this\t= $(this).parents('.dropdown-open').removeClass('dropdown-open').end(),\n\t\t\t$modal\t= $.modal(\t'<div class=\"modal fade\">' +\n\t\t\t\t\t\t\t\t\t'<div class=\"modal-dialog\">' +\n\t\t\t\t\t\t\t\t\t\t'<form class=\"modal-content form-horizontal\">' +\n\t\t\t\t\t\t\t\t\t\t\t'<fieldset>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"modal-header\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<h5 class=\"modal-title\">' + $this.text() + '</h5>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"modal-body\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"form-group\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<label class=\"col-sm-3 control-label\" for=\"password-old\">原密码</label>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"col-sm-6\"><input type=\"password\" name=\"password_old\" id=\"password-old\" class=\"form-control\" autofocus=\"autofocus\" /></div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"form-group\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<label class=\"col-sm-3 control-label\" for=\"password\">新密码</label>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"col-sm-6\"><input type=\"password\" name=\"password\" id=\"password\" class=\"form-control\" /></div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"form-group\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<label class=\"col-sm-3 control-label\" for=\"password-repeat\">确认新密码</label>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"col-sm-6\"><input type=\"password\" name=\"password_repeat\" id=\"password-repeat\" class=\"form-control\" /></div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"modal-footer\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">取消</button>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<button type=\"submit\" class=\"btn btn-primary\">确定</button>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t'</fieldset>' +\n\t\t\t\t\t\t\t\t\t\t'</form>' +\n\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t'</div>');\n\n\t\t$modal.on('submit', 'form', function() {\n\t\t\tlet target, error,\n\t\t\t\t$fieldset\t= $(this).find('fieldset').prop('disabled', true),\n\t\t\t\tUser\t\t= {\n\t\t\t\t\tpassword_old: this.password_old.value,\n\t\t\t\t\tpassword: this.password.value,\n\t\t\t\t\tpassword_repeat: this.password_repeat.value,\n\t\t\t\t};\n\n\t\t\tif(User.password_old == '') {\n\t\t\t\ttarget = this.password_old;\n\t\t\t\terror = '请输入原密码';\n\t\t\t} else if(User.password == '') {\n\t\t\t\ttarget = this.password;\n\t\t\t\tthis.password.focus();\n\t\t\t\terror = '请输入新密码';\n\t\t\t} else if(User.password_repeat == '') {\n\t\t\t\ttarget = this.password_repeat;\n\t\t\t\terror = '请确认新密码';\n\t\t\t} else if(User.password != User.password_repeat) {\n\t\t\t\ttarget = this.password_repeat;\n\t\t\t\terror = '两次输入的新密码不一致';\n\t\t\t}\n\t\t\tif(error) {\n\t\t\t\t$fieldset.prop('disabled', false);\n\t\t\t\ttarget.focus();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: $this.attr('href'),\n\t\t\t\tdata: $.csrf({User: User}),\n\t\t\t\tmethod: 'post',\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: (d) => {\n\t\t\t\t\td.error ? $fieldset.prop('disabled', false) : $modal.modal('hide');\n\t\t\t\t\t$.alert(d.message, d.error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn false;\n\t\t});\n\n\t\treturn false;\n\t});\n\n})(jQuery, window, document);\n","/*!\n * form\n * xiewulong <xiewulong@vip.qq.com>\n * create: 2016/8/8\n * since: 0.0.1\n */\n\n// switch\n(($, undefined) => {\n\n\tclass Radio {\n\n\t\tconstructor($target, unsupportList, defaultValue, staticSelect, parentItems, parentItemsValue) {\n\t\t\tthis.$target = $target;\n\t\t\tthis.unsupportList = unsupportList;\n\t\t\tthis.value = defaultValue;\n\t\t\tthis.parentItems = parentItems;\n\t\t\tthis.parentItemsValue = parentItemsValue;\n\t\t\tthis.$formGroups = $('.form-group');\n\t\t\tif(staticSelect) {\n\t\t\t\tthis.$static = $(staticSelect);\n\t\t\t\tthis.value = this.value == '' ? this.$target.val() : this.value;\n\t\t\t}\n\n\t\t\treturn this.init();\n\t\t}\n\n\t\tinit() {\n\t\t\tthis.events();\n\t\t\tthis.switch();\n\n\t\t\treturn this.$target;\n\t\t}\n\n\t\tevents() {\n\t\t\tlet _this = this;\n\t\t\tthis.$target.on('change', function() {\n\t\t\t\t_this.value = this.value;\n\t\t\t\t_this.switch();\n\t\t\t});\n\t\t}\n\n\t\tswitch() {\n\t\t\tlet unsupports, itemValue, itemName;\n\t\t\tif(this.$static) {\n\t\t\t\titemValue = this.parentItems[this.value];\n\t\t\t\tthis.$static.html(this.parentItemsValue[itemValue] || '');\n\t\t\t\tthis.value = itemValue;\n\t\t\t}\n\t\t\tunsupports\t= this.unsupportList[this.value] || [];\n\t\t\tthis.$formGroups.show();\n\t\t\tif(!unsupports.length) return;\n\t\t\tthis.$formGroups.filter('.' + unsupports.join(', .')).hide();\n\t\t}\n\n\t}\n\n\t$.fn.radioFormSwitch = function(unsupportList, defaultValue, staticSelect, parentItems, parentItemsValue) {\n\t\treturn new Radio(this, unsupportList, defaultValue, staticSelect, parentItems, parentItemsValue);\n\t};\n\n\t$.fn.formSwitch = function(unsupportList, defaultValue, staticSelect, parentItems, parentItemsValue) {\n\t\tlet type = this.attr('data-form-switch');\n\n\t\tif(this[type + 'FormSwitch']) {\n\t\t\treturn this[type + 'FormSwitch'](unsupportList, defaultValue, staticSelect, parentItems, parentItemsValue);\n\t\t}\n\n\t\treturn this;\n\t};\n\n})(jQuery);\n\n// data selection\n(($, document, undefined) => {\n\tlet $doc\t\t= $(document);\n\n\tclass Selection {\n\n\t\tconstructor(button) {\n\t\t\tthis.$button\t= $(button);\n\t\t\tthis.$formGroup\t= this.$button.parents('.form-group');\n\t\t\tthis.$label\t\t= this.$formGroup.find('label');\n\t\t\tthis.$hidden\t= this.$formGroup.find('input[type=hidden]');\n\t\t\tthis.$name\t\t= this.$formGroup.find('span');\n\t\t\tthis.url\t\t= this.$button.attr('data-form-selection');\n\t\t\tthis._value\t\t= this.$hidden.val();\n\n\t\t\treturn this.init();\n\t\t}\n\n\t\tinit() {\n\t\t\tthis.getData();\n\t\t\tthis.modal();\n\t\t\tthis.events();\n\n\t\t\treturn;\n\t\t}\n\n\t\tevents() {\n\t\t\tlet _this\t= this;\n\t\t\tthis.$modal.on('click', 'ul li p', function() {\n\t\t\t\tlet $this\t= $(this);\n\t\t\t\tif($this.next('ul').length) {\n\t\t\t\t\t$this.parent('li').toggleClass('unfold');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif($this.hasClass('active')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t_this.value = $this.attr('data-id');\n\t\t\t\t_this.name = $this.attr('data-name');\n\t\t\t\t_this.setValue();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tthis.$name.on('click', 'i', function() {\n\t\t\t\t_this.clearAll();\n\t\t\t});\n\t\t}\n\n\t\tsetValue() {\n\t\t\tthis.$hidden.val(this.value);\n\t\t\tthis.$name.html((this.$button.attr('data-form-selected-clear') ? '<i class=\"glyphicon glyphicon-remove\" data-form-selected=\"clear\"></i>' : '') + this.name);\n\t\t\tthis.close();\n\t\t}\n\n\t\tclose() {\n\t\t\tthis.$modal.modal('hide');\n\t\t}\n\n\t\tmodal() {\n\t\t\tlet html =\t'<div class=\"modal fade\">' +\n\t\t\t\t\t\t\t'<div class=\"modal-dialog\">' +\n\t\t\t\t\t\t\t\t'<div class=\"modal-content\">' +\n\t\t\t\t\t\t\t\t\t'<div class=\"modal-header\">' +\n\t\t\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' +\n\t\t\t\t\t\t\t\t\t\t'<h5 class=\"modal-title\">' + this.$label.text() + '</h5>' +\n\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t'<div class=\"modal-body admin-selection admin-loading\"></div>' +\n\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t'</div>';\n\t\t\tthis.$modal = $.modal(html);\n\t\t\tthis.setData();\n\t\t}\n\n\t\tsetData() {\n\t\t\tlet _render, list,\n\t\t\t\t_this\t= this;\n\t\t\tif(this.loaded || !this.data) return;\n\t\t\tthis.loaded = true;\n\t\t\tlist = (_render = (items) => {\n\t\t\t\tlet item,\n\t\t\t\t\ti\t\t= 0,\n\t\t\t\t\tlen\t\t= items.length,\n\t\t\t\t\thtml\t= ['<ul>'];\n\t\t\t\tfor(; i < len; i++) {\n\t\t\t\t\tlet hasSub;\n\t\t\t\t\titem = items[i];\n\t\t\t\t\thasSub = item.children || item.items;\n\t\t\t\t\thtml.push('<li><p' + (!hasSub && this._value && item.id == this._value ? ' class=\"active\"' : '') + ' data-id=\"' + item.id + '\" data-name=\"' + item.name + '\">' + (hasSub ? '<i class=\"glyphicon glyphicon-triangle-bottom\"></i>' : '') + item.name + '</p>');\n\t\t\t\t\titem.children && html.push(_render(item.children));\n\t\t\t\t\titem.items && html.push(_render(item.items));\n\t\t\t\t\thtml.push('</li>');\n\t\t\t\t}\n\t\t\t\thtml.push('</ul>');\n\t\t\t\treturn html.join('');\n\t\t\t})(this.data);\n\t\t\tthis.$modal.find('.admin-loading').removeClass('admin-loading').html(list);\n\t\t}\n\n\t\tgetData() {\n\t\t\t$.ajax({\n\t\t\t\turl: this.url,\n\t\t\t\tdata: {},\n\t\t\t\tmethod: 'get',\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: (d) => {\n\t\t\t\t\tif(d.error) {\n\t\t\t\t\t\t$.alert(d.message);\n\t\t\t\t\t}\n\t\t\t\t\tthis.data = d.data;\n\t\t\t\t\tthis.setData();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t}\n\n\t$doc.on('click', '[data-form-selection]', function() {\n\t\tnew Selection(this);\n\t}).on('click', '[data-form-selected=clear]', function() {\n\t\tlet $this\t= $(this);\n\t\t$this.parent('.selection-name').html('').prevAll('input[type=hidden]').val('');\n\t});\n})(jQuery, document);\n"],"sourceRoot":"/source/"}